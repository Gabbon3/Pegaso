# 11. Gestione Memoria Cpp

## 1. Architettura

1. __Static__ memoria statica -> usata per memorizzare variabili globali, tenute in vita per tutta l esecuzione del programma.
2. __Stack__ la pila -> memoria di lavoro per funzioni e variabili locali
    - LIFO: quando chiami una fn le sue variabili vengono impilate in alto, quando esce vengono distrutte.
    - è velocissima perche alloca contiguamente
    - limite: è una risorsa limitata, se fai troppe chiamate ricorsive riempi lo stack e ottieni __Stack overflow__
3. __Heap__ il mucchio caotico -> è la memoria dinamica, vasta e libera
    - gestione -> manuale. sei tu che devi chiedere e liberare spazio
    - rischio -> se dimentichi di liberare la memoria i dati persisteranno e occuperanno inutilmente spazio, il famoso __Memory Leak__ (memoria occupata per sempre) e anche __Frammentazione__ (buchi di memoria non usati), cosa che lo stack non puo avere.

## 2. Puntatori

Quando dichiariamo un array `int myArr[5]`, il nome myArr è a tutti gli effetti un puntatore e contiene l indirizzo di memoria del primo elemento `&myArr[0]`.

La differenza fondamentale:
- __puntatore normale__ `int *p`: è una variabile libera. ora puo puntare all indirizzo A e poi a B.
- __array__ `int a[5]` il nome 'a' nasce e muore indicando quella specifica zona di memoria, non puoi sovrascrivere l indirizzo di a come se fosse un qualsiasi puntatore.

## 3. Stringhe e terminatore fantasma

in c le stringhe `char[]` per indicare la fine di ognuna di esse avremo bisogno di indicare come ultimo byte `\0` (null-terminator).
Senza di esso c potrebbe darti errore o leggerti byte fino a che non trova \0. quindi quando si salva "Ciao" non fare [4] ma [5] cosi l'ultima posizione potra essere usata da \0.